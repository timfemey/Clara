/*
 * numbers-node
 * https://github.com/avoid3d/numbers-node
 *
 * Copyright (c) 2013 Pierre Hugo
 * Licensed under the MIT license.
 */

'use strict';
var request = require('request');

/* n - the number, date or year
 * type - one of trivia, date, year, math
 */
 function numbersapi_request(n, type, callback, error_callback){
    var url = 'http://numbersapi.com/' + n + '/' + type;
    request(url, function(error, response, body){
        if (!error && response.statusCode == 200){
            callback(body);
        } else {
            error_callback({'request_error': error, 'request_response': response});
        }
    });
}


/* Return 'trivia' for given number.
 * callback should expect body.
 * optional error callback.
 */
exports.trivia = function(number, callback, error_callback){
    numbersapi_request(number, 'trivia', callback, error_callback);
}

/* Return 'date type response' for given date.
 * callback should expect body.
 * optional error callback.
 * TODO: support legin Date() objects.
 * TODO: support description of the date.
 */
exports.date = function(date, callback, error_callback){
    numbersapi_request(date, 'date', callback, error_callback);
}

/* Return 'year type response' for given year.
 * callback should expect body.
 * optional error callback.
 * TODO: support legin Date() objects.
 * TODO: support description of the year.
 */
exports.year = function(year, callback, error_callback){
    numbersapi_request(year, 'year', callback, error_callback);
}

/* Return 'year type response' for given year.
 * callback should expect body.
 * optional error callback.
 */
exports.math = function(number, callback, error_callback){
    numbersapi_request(number, 'math', callback, error_callback);
}
